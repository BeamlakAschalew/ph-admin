import{d as y,w as v,W as T,r as B,c as l,o as a,a as O,e,h as w,v as k,F as i,i as g,f as C,n as x,g as A,t as r,k as H,l as V,u as M,P as U}from"./app-BPN7RguF.js";import q from"./MainLayout-CfICjwl-.js";const R={class:"flex min-h-screen flex-col"},$={class:"bg-white-50 flex-1"},F={class:"mx-auto w-full px-2 py-6 sm:px-4"},W={class:"flex flex-col items-center justify-center gap-6 2xl:flex-row"},E={class:"w-full max-w-7xl px-4 py-6"},X={class:"mb-4 flex items-center justify-between"},z={class:"flex items-end justify-end space-x-2"},G={class:"mb-4 border-b border-gray-200"},Q={class:"flex space-x-2","aria-label":"Tabs"},I=["onClick"],J={class:"rounded-xl border bg-white shadow-sm"},K={class:"overflow-x-auto"},Y={class:"min-w-full divide-y divide-gray-200"},Z={class:"divide-y divide-gray-200"},ee={key:0},te={class:"hover:bg-gray-100"},se={class:"whitespace-nowrap px-6 py-4"},oe={class:"text-sm font-medium text-gray-900"},ae={class:"text-sm text-gray-500"},re={class:"whitespace-normal break-words px-6 py-4"},le={class:"text-sm text-gray-900"},ne={class:"text-sm text-gray-500"},de={class:"whitespace-nowrap px-6 py-4"},ie={class:"text-sm text-gray-900"},ce={class:"whitespace-nowrap px-6 py-4"},pe={class:"text-sm text-gray-900"},ue={class:"text-sm text-gray-500"},xe={class:"whitespace-nowrap px-6 py-4"},me={class:"flex flex-col gap-2"},ye={class:"whitespace-nowrap px-6 py-4 text-end"},ge=["onClick"],he={key:0,class:"bg-gray-50"},fe={colspan:"6",class:"px-6 py-4"},_e={class:"overflow-x-auto"},be={class:"min-w-full divide-y divide-gray-200"},ve={class:"divide-y divide-gray-200"},we={key:0},ke={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Ce={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},De={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Se={class:"divide-y divide-gray-200"},Pe={key:0},je={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Ne={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Le={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Te={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},Be=["innerHTML"],Oe=["innerHTML"],Ve=Object.assign({layout:q},{__name:"Sales",props:{orders:Object,filters:Object},setup(D){var f,_;const n=D,m=y(n.orders.data),h=y("All"),c=y(((f=n.filters)==null?void 0:f.fromDate)||""),p=y(((_=n.filters)==null?void 0:_.toDate)||""),S=y([{label:"All Orders",value:"All"},{label:"Completed",value:"Completed"},{label:"Pending",value:"Pending"},{label:"Cancelled",value:"Cancelled"}]);v([c,p],()=>{T.get("/admin/sales-report",{fromDate:c.value,toDate:p.value},{preserveState:!0,replace:!0,onSuccess:d=>{m.value=d.props.orders.data}})}),v(()=>n.orders.data,d=>{m.value=d});const P=d=>{const s=m.value.find(u=>u.id===d);s&&(s.expanded=!s.expanded)},j=d=>d==="All"?m.value.length:m.value.filter(s=>s.status===d).length,N=d=>{switch(d){case"Completed":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=()=>{let d="/admin/sales-report/export";const s=new URLSearchParams;c.value&&s.append("fromDate",c.value),p.value&&s.append("toDate",p.value);const u=s.toString();u&&(d+=`?${u}`),window.location.href=d};return(d,s)=>{const u=B("Head");return a(),l(i,null,[O(u,{title:"Sales report"}),e("div",R,[e("main",$,[e("div",F,[e("div",W,[e("div",E,[e("div",X,[s[4]||(s[4]=e("h2",{class:"text-xl font-bold text-gray-800"}," Sales Report ",-1)),e("div",z,[e("div",null,[s[2]||(s[2]=e("label",{for:"fromDate",class:"mb-1 block text-sm font-medium text-gray-700"},"From",-1)),w(e("input",{type:"date",id:"fromDate","onUpdate:modelValue":s[0]||(s[0]=t=>c.value=t),class:"block w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[k,c.value]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"toDate",class:"mb-1 block text-sm font-medium text-gray-700"},"To",-1)),w(e("input",{type:"date",id:"toDate","onUpdate:modelValue":s[1]||(s[1]=t=>p.value=t),class:"block w-full rounded-md border-gray-300 p-2 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[k,p.value]])]),e("button",{onClick:L,type:"button",class:"rounded-md bg-green-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600"}," Download Report (XLSX) ")])]),e("div",G,[e("nav",Q,[(a(!0),l(i,null,g(S.value,t=>(a(),l("button",{key:t.value,onClick:o=>h.value=t.value,class:x(["inline-flex items-center gap-x-2 whitespace-nowrap border-b-2 px-1 py-4 text-sm",h.value===t.value?"border-blue-600 font-semibold text-blue-600":"border-transparent text-gray-500 hover:border-blue-600 hover:text-blue-600"])},[A(r(t.label)+" ",1),e("span",{class:x(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",N(t.value)])},r(j(t.value)),3)],10,I))),128))])]),e("div",J,[e("div",K,[e("table",Y,[s[11]||(s[11]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Consumer "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Location "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Ordered At "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Phone "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Action ")])],-1)),e("tbody",Z,[!n.orders||!n.orders.data||n.orders.data.length===0?(a(),l("tr",ee,s[5]||(s[5]=[e("td",{colspan:"100%",class:"py-4 text-center"}," No orders found. ",-1)]))):(a(!0),l(i,{key:1},g(n.orders.data,t=>(a(),l(i,{key:t.id},[e("tr",te,[e("td",se,[e("div",oe,r(t.consumer.institution_name),1),e("div",ae,r(t.consumer.first_name)+" "+r(t.consumer.last_name),1)]),e("td",re,[e("div",le,r(t.consumer.subcity.subcity_name),1),e("div",ne," Woreda "+r(t.consumer.woreda)+", "+r(t.consumer.special_place),1)]),e("td",de,[e("div",ie,r(new Date(t.created_at).toLocaleDateString("en-GB")),1)]),e("td",ce,[e("div",pe," +251"+r(t.consumer.primary_phone),1),e("div",ue," +251"+r(t.consumer.secondary_phone),1)]),e("td",xe,[e("div",me,[e("button",{class:x(["inline-flex items-center gap-x-2 rounded-lg border border-gray-200 px-3 py-1 text-sm font-medium text-white",{"bg-green-500 hover:bg-green-600":t.status==="Completed","bg-yellow-500 hover:bg-yellow-600":t.status==="Pending","bg-red-500 hover:bg-red-600":t.status==="Cancelled"}])},r(t.status),3)])]),e("td",ye,[e("button",{onClick:o=>P(t.id),class:"inline-flex items-center justify-center rounded-full border border-gray-200 bg-white p-1 text-gray-500 hover:bg-gray-100"},[(a(),l("svg",{class:x(["h-5 w-5 transition-transform duration-200",{"rotate-180":t.expanded}]),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s[6]||(s[6]=[e("path",{d:"m6 9 6 6 6-6"},null,-1)]),2))],8,ge)])]),t.expanded?(a(),l("tr",he,[e("td",fe,[e("div",_e,[e("table",be,[s[9]||(s[9]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Product Name "),e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Unit "),e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Quantity ")])],-1)),e("tbody",ve,[t.items.length===0?(a(),l("tr",we,s[7]||(s[7]=[e("td",{colspan:"3",class:"px-6 py-2 text-center text-sm text-gray-500"}," No products found. ",-1)]))):(a(!0),l(i,{key:1},g(t.items,o=>(a(),l("tr",{key:o.product_id,class:"hover:bg-gray-100"},[e("td",ke,r(o.product.product_name),1),e("td",Ce,r(o.product.unit?o.product.unit.unit_name:"None"),1),e("td",De,r(o.quantity),1)]))),128))]),s[10]||(s[10]=e("tr",null,[e("td",{colspan:"3",class:"bg-gray-200 px-6 py-2 text-sm font-semibold text-gray-700"}," Custom orders ")],-1)),e("tbody",Se,[t.custom_items.length===0?(a(),l("tr",Pe,s[8]||(s[8]=[e("td",{colspan:"3",class:"px-6 py-2 text-center text-sm text-gray-500"}," No custom orders found. ",-1)]))):(a(!0),l(i,{key:1},g(t.custom_items,o=>{var b;return a(),l("tr",{key:o.id,class:"hover:bg-gray-100"},[e("td",je,r(o.product_name),1),e("td",Ne,r(((b=o.unit)==null?void 0:b.unit_name)??"None"),1),e("td",Le,r(o.quantity),1)])}),128))])])])])])):C("",!0)],64))),128))])])])]),e("nav",Te,[n.orders&&n.orders.links&&n.orders.links.length?(a(!0),l(i,{key:0},g(n.orders.links,(t,o)=>(a(),l(i,{key:o},[t.url?(a(),H(M(U),{key:0,"preserve-scroll":"",href:t.url,class:x([o===0?"rounded-l-md":"",o===n.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",t.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:V(()=>[e("span",{innerHTML:t.label},null,8,Be)]),_:2},1032,["href","class"])):(a(),l("span",{key:1,innerHTML:t.label,class:x([o===0?"rounded-l-md":"",o===n.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,Oe))],64))),128)):C("",!0)])])])])])])],64)}}});export{Ve as default};
