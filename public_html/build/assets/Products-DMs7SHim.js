import{r as i,w as L,W as k,b as N,c as n,o as l,d as Z,e,f as p,g as V,h as _,v as D,F as x,i as j,p as S,a as U,t as M,k as q,l as G,n as B}from"./app-rINgeERI.js";import{l as J}from"./lodash-QSqkEmU5.js";import K from"./MainLayout-DOkxj0AS.js";const R={class:"flex-1"},X={class:"mx-auto w-full max-w-4xl px-4 py-6"},Y={class:"mb-6"},ee={class:"overflow-hidden rounded-xl border bg-white shadow-sm"},te={class:"overflow-x-auto"},se={class:"min-w-full divide-y divide-gray-200"},oe={class:"divide-y divide-gray-200"},le={key:0},ne={class:"whitespace-nowrap px-6 py-4"},ie={class:"text-sm font-medium text-gray-900"},re={class:"whitespace-nowrap px-6 py-4"},ae={class:"text-sm text-gray-900"},de={class:"whitespace-nowrap px-6 py-4 text-end"},ue={class:"flex justify-end gap-2"},me=["onClick"],ce=["onClick"],fe={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},pe=["innerHTML"],xe=["innerHTML"],ge={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},be={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},ve={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},ye={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},we={class:"sm:flex sm:items-start"},he={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},ke={class:"mt-4 space-y-4"},_e=["value"],Ce={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},je={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Me={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Pe={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},$e={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ve={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},De={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Le={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ne={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Se={class:"sm:flex sm:items-start"},Ue={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},Be={class:"mt-4 space-y-4"},Ee=["value"],Ae={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Te={key:3,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},He={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},ze={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Fe={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Ie={class:"sm:flex sm:items-start"},Oe={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},We={class:"mt-4"},Qe={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Je=Object.assign({layout:K},{__name:"Products",props:{products:Object,filters:Object,units:Array},setup(c){const C=c,r=i([{id:null,unit_name:"None"},...C.units]),f=i(C.products.data);L(()=>C.products,o=>{f.value=o.data});const P=i(C.filters.search),E=J.debounce(o=>{k.get("/admin/products",{search:o},{preserveState:!0,replace:!0,except:["units"]})},300);L(P,o=>{E(o)});const g=i(!1),a=i({id:null,name:"",unit:r.value[0].id}),A=o=>{var t,u;a.value={id:o.id,name:o.product_name,unit:o.unit?(t=r.value.find(h=>h.unit_name===o.unit.unit_name))==null?void 0:t.id:((u=r.value.find(h=>h.id===null))==null?void 0:u.id)||r.value[0].id},g.value=!0},T=()=>{const o=f.value.findIndex(u=>u.id===a.value.id),t=r.value.find(u=>u.id===a.value.unit);o!==-1&&k.put(`/admin/products/${a.value.id}`,{product_name:a.value.name,product_unit_id:t?t.id:""},{preserveState:!0,replace:!0,except:["units"]}),g.value=!1},b=i(!1),$=i(null),H=o=>{$.value=o,b.value=!0},z=()=>{f.value=f.value.filter(o=>o.id!==$.value),k.delete(`/admin/products/${$.value}`,{preserveState:!0,replace:!0,except:["units"]}),b.value=!1},v=i(!1),m=i({name:"",unit:null}),F=()=>{m.value={name:"",unit:null},v.value=!0},I=()=>{const o=r.value.find(t=>t.id===m.value.unit);k.post("/admin/products",{product_name:m.value.name,product_unit_id:o?o.id:""},{preserveState:!0,replace:!0,except:["units"]}),v.value=!1},y=i(!1),w=i(null),O=o=>{const t=o.target.files[0];t?w.value=t:w.value=null},W=()=>{w.value=null,y.value=!0},Q=()=>{if(w.value){const o=new FormData;o.append("file",w.value),k.post("/admin/products/import",o,{preserveState:!0,replace:!0})}y.value=!1};return(o,t)=>{const u=N("Head"),h=N("Link");return l(),n(x,null,[Z(u,{title:"Products"}),e("main",R,[e("div",X,[e("div",{class:"mb-6 flex items-center justify-between"},[t[15]||(t[15]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products List",-1)),e("div",{class:"flex items-center gap-3"},[e("button",{onClick:W,class:"inline-flex items-center gap-x-2 rounded-lg bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"},t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5v14"})],-1),V(" Import from Excel ")])),e("button",{onClick:F,class:"inline-flex items-center gap-x-2 rounded-lg bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5v14"})],-1),V(" Add a product ")]))])]),e("div",Y,[_(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>P.value=s),class:"block w-full rounded-lg border-gray-200 px-4 py-3 text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Search products..."},null,512),[[D,P.value]])]),e("div",ee,[e("div",te,[e("table",se,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Product Name "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Unit "),e("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Actions ")])],-1)),e("tbody",oe,[f.value.length===0?(l(),n("tr",le,t[16]||(t[16]=[e("td",{colspan:"3",class:"px-6 py-8 text-center text-gray-500"}," No products found ",-1)]))):p("",!0),(l(!0),n(x,null,j(f.value,s=>(l(),n("tr",{key:s.id,class:"hover:bg-gray-100"},[e("td",ne,[e("div",ie,M(s.product_name),1)]),e("td",re,[e("div",ae,M(s.unit?s.unit.unit_name:r.value.find(d=>d.id===null).unit_name),1)]),e("td",de,[e("div",ue,[e("button",{onClick:d=>A(s),class:"inline-flex items-center gap-x-1 rounded-lg border border-transparent bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:bg-blue-600"},t[17]||(t[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})],-1),V(" Edit ")]),8,me),e("button",{onClick:d=>H(s.id),class:"inline-flex items-center gap-x-1 rounded-lg border border-transparent bg-red-500 px-3 py-1 text-sm font-medium text-white hover:bg-red-600"},t[18]||(t[18]=[U('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg> Delete ',2)]),8,ce)])])]))),128))])])])]),e("nav",fe,[c.products.links&&c.products.links.length?(l(!0),n(x,{key:0},j(c.products.links,(s,d)=>(l(),n(x,{key:d},[s.url?(l(),q(h,{key:0,href:s.url,class:B([d===0?"rounded-l-md":"",d===c.products.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",s.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:G(()=>[e("span",{innerHTML:s.label},null,8,pe)]),_:2},1032,["href","class"])):(l(),n("span",{key:1,innerHTML:s.label,class:B([d===0?"rounded-l-md":"",d===c.products.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,xe))],64))),128)):p("",!0)])])]),g.value?(l(),n("div",ge,[e("div",be,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[1]||(t[1]=s=>g.value=!1)}),e("div",ve,[e("div",ye,[e("div",we,[e("div",he,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Edit Product ",-1)),e("div",ke,[e("div",null,[t[20]||(t[20]=e("label",{for:"edit-name",class:"block text-sm font-medium text-gray-700"},"Product Name",-1)),_(e("input",{type:"text",id:"edit-name","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[D,a.value.name]])]),e("div",null,[t[21]||(t[21]=e("label",{for:"edit-unit",class:"block text-sm font-medium text-gray-700"},"Unit",-1)),_(e("select",{id:"edit-unit","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.unit=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[(l(!0),n(x,null,j(r.value,s=>(l(),n("option",{value:s.id,key:s.id},M(s.unit_name),9,_e))),128))],512),[[S,a.value.unit]])])])])])]),e("div",Ce,[e("button",{type:"button",onClick:T,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Save Changes "),e("button",{type:"button",onClick:t[4]||(t[4]=s=>g.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),b.value?(l(),n("div",je,[e("div",Me,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[5]||(t[5]=s=>b.value=!1)}),e("div",Pe,[t[23]||(t[23]=U('<div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"><div class="sm:flex sm:items-start"><div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"><h3 class="text-lg font-medium leading-6 text-gray-900" id="modal-title"> Delete Product </h3><div class="mt-2"><p class="text-sm text-gray-500"> Are you sure you want to delete this product? This action cannot be undone. </p></div></div></div></div>',1)),e("div",$e,[e("button",{type:"button",onClick:z,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[6]||(t[6]=s=>b.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),v.value?(l(),n("div",Ve,[e("div",De,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[7]||(t[7]=s=>v.value=!1)}),e("div",Le,[e("div",Ne,[e("div",Se,[e("div",Ue,[t[26]||(t[26]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Add New Product ",-1)),e("div",Be,[e("div",null,[t[24]||(t[24]=e("label",{for:"add-name",class:"block text-sm font-medium text-gray-700"},"Product Name",-1)),_(e("input",{type:"text",id:"add-name","onUpdate:modelValue":t[8]||(t[8]=s=>m.value.name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[D,m.value.name]])]),e("div",null,[t[25]||(t[25]=e("label",{for:"add-unit",class:"block text-sm font-medium text-gray-700"},"Unit",-1)),_(e("select",{id:"add-unit","onUpdate:modelValue":t[9]||(t[9]=s=>m.value.unit=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[(l(!0),n(x,null,j(r.value,s=>(l(),n("option",{value:s.id,key:s.id},M(s.unit_name),9,Ee))),128))],512),[[S,m.value.unit]])])])])])]),e("div",Ae,[e("button",{type:"button",onClick:I,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Add Product "),e("button",{type:"button",onClick:t[10]||(t[10]=s=>v.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),y.value?(l(),n("div",Te,[e("div",He,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[11]||(t[11]=s=>y.value=!1)}),e("div",ze,[e("div",Fe,[e("div",Ie,[e("div",Oe,[t[27]||(t[27]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Import Products from Excel ",-1)),e("div",We,[e("input",{type:"file",accept:".xlsx, .xls",onChange:O,class:"block w-full text-sm text-gray-500 file:mr-4 file:rounded-md file:border-0 file:bg-blue-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-blue-700 hover:file:bg-blue-100"},null,32)])])])]),e("div",Qe,[e("button",{type:"button",onClick:Q,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Import "),e("button",{type:"button",onClick:t[12]||(t[12]=s=>y.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0)],64)}}});export{Je as default};
