import{r as b,w as V,W as k,a as U,c as i,o as n,b as H,d as e,e as m,g as r,v as d,F as f,h as x,p as h,t as a,k as B,l as E,n as j}from"./app-CUuQyGGN.js";import{l as z}from"./lodash-Dwhwkl6s.js";import F from"./MainLayout-BGItrjBz.js";const I={class:"flex-1"},N={class:"mx-auto w-full max-w-6xl px-4 py-6"},R={class:"mb-6 flex items-center justify-between"},D={class:"mb-6"},O={class:"overflow-hidden rounded-xl border bg-white shadow-sm"},Q={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200"},J={class:"bg-gray-50"},K={key:0,scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"},X={class:"divide-y divide-gray-200"},Y={key:0},Z={class:"whitespace-nowrap px-6 py-4"},ee={class:"text-sm font-medium text-gray-900"},te={class:"text-sm text-gray-500"},se={class:"whitespace-nowrap px-6 py-4"},le={class:"text-sm text-gray-900"},oe={class:"text-sm text-gray-500"},ne={class:"whitespace-nowrap px-6 py-4"},ie={class:"text-sm text-gray-900"},re={key:0,class:"text-sm text-gray-500"},de={key:0,class:"whitespace-nowrap px-6 py-4 text-end"},ue={class:"flex justify-end gap-2"},ae=["onClick"],me=["onClick"],pe={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},be=["innerHTML"],fe=["innerHTML"],ce={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},xe={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},ye={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},ge={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},ve={class:"mt-4 space-y-4"},we=["value"],ke=["value"],he={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},_e={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Se={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Ce={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ve={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Ue={class:"mt-4 space-y-4"},je=["value"],$e=["value"],Le={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Pe={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Me={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},qe={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Te={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Be=Object.assign({layout:F},{__name:"Suppliers",props:{suppliers:Object,filters:Object,subcities:Array},setup(p){const _=p,w=b(_.suppliers.data);V(()=>_.suppliers,u=>{w.value=u.data});const S=b(_.filters.search),$=z.debounce(u=>{k.get("/suppliers",{search:u},{preserveState:!0,replace:!0})},300);V(S,u=>{$(u)});const y=b(!1),g=b(!1),C=b(null),l=b({id:null,institution_name:"",first_name:"",last_name:"",special_place:"",primary_phone:"",secondary_phone:"",subcity_id:null,password:""});function L(u){console.log(u),l.value={...u},y.value=!0}function P(){w.value.findIndex(t=>t.id===l.value.id)!==-1&&(console.log(l.value),k.put(`/suppliers/${l.value.id}`,{...l.value})),y.value=!1}function M(u){C.value=u,g.value=!0}function q(){k.delete(`/suppliers/${C.value}`,{preserveState:!0,replace:!0}),g.value=!1,C.value=null}const v=b(!1),o=b({institution_name:"",first_name:"",last_name:"",special_place:"",primary_phone:"",secondary_phone:"",subcity_id:null,woreda:null,password:"",license_number:""});function T(){k.post("/suppliers",{...o.value}),v.value=!1,o.value={institution_name:"",first_name:"",last_name:"",special_place:"",primary_phone:"",secondary_phone:"",subcity_id:null,woreda:null,password:"",license_number:""}}return(u,t)=>{const W=U("Head"),A=U("Link");return n(),i(f,null,[H(W,{title:"Suppliers"}),e("main",I,[e("div",N,[e("div",R,[t[28]||(t[28]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Suppliers List",-1)),u.$page.props.auth.user_role==="superadmin"?(n(),i("button",{key:0,onClick:t[0]||(t[0]=s=>v.value=!0),class:"inline-flex items-center justify-center rounded-full bg-teal-600 p-2 text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"},t[27]||(t[27]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5v14"})],-1)]))):m("",!0)]),e("div",D,[r(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>S.value=s),class:"block w-full rounded-lg border-gray-200 px-4 py-3 text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Search users..."},null,512),[[d,S.value]])]),e("div",O,[e("div",Q,[e("table",G,[e("thead",J,[e("tr",null,[t[29]||(t[29]=e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Institution ",-1)),t[30]||(t[30]=e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Location ",-1)),t[31]||(t[31]=e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Phone ",-1)),u.$page.props.auth.user_role==="superadmin"?(n(),i("th",K," Actions ")):m("",!0)])]),e("tbody",X,[w.value.length===0?(n(),i("tr",Y,t[32]||(t[32]=[e("td",{colspan:"3",class:"px-6 py-8 text-center text-gray-500"}," No suppliers found ",-1)]))):m("",!0),(n(!0),i(f,null,x(w.value,s=>(n(),i("tr",{key:s.id,class:"hover:bg-gray-100"},[e("td",Z,[e("div",ee,a(s.institution_name),1),e("div",te,a(s.first_name)+" "+a(s.last_name),1)]),e("td",se,[e("div",le,a(s.subcity.subcity_name),1),e("div",oe," Woreda "+a(s.woreda)+" "+a(s.special_place),1)]),e("td",ne,[e("div",ie," +251"+a(s.primary_phone),1),s.secondary_phone?(n(),i("div",re," +251"+a(s.secondary_phone),1)):m("",!0)]),u.$page.props.auth.user_role==="superadmin"?(n(),i("td",de,[e("div",ue,[e("button",{onClick:c=>L(s),class:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-2 text-sm font-medium text-gray-500 hover:bg-gray-100"}," Edit ",8,ae),e("button",{onClick:c=>M(s.id),class:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-2 text-sm font-medium text-red-500 hover:bg-red-50"}," Delete ",8,me)])])):m("",!0)]))),128))])])])]),e("nav",pe,[p.suppliers.links&&p.suppliers.links.length?(n(!0),i(f,{key:0},x(p.suppliers.links,(s,c)=>(n(),i(f,{key:c},[s.url?(n(),B(A,{key:0,href:s.url,class:j([c===0?"rounded-l-md":"",c===p.suppliers.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",s.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:E(()=>[e("span",{innerHTML:s.label},null,8,be)]),_:2},1032,["href","class"])):(n(),i("span",{key:1,innerHTML:s.label,class:j([c===0?"rounded-l-md":"",c===p.suppliers.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,fe))],64))),128)):m("",!0)])])]),y.value?(n(),i("div",ce,[e("div",xe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[2]||(t[2]=s=>y.value=!1)}),e("div",ye,[e("div",ge,[t[44]||(t[44]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Edit Supplier ",-1)),e("div",ve,[e("div",null,[t[33]||(t[33]=e("label",{for:"edit-firstname",class:"block text-sm font-medium text-gray-700"}," First name ",-1)),r(e("input",{type:"text",id:"edit-firstname",required:"","onUpdate:modelValue":t[3]||(t[3]=s=>l.value.first_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.first_name]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"edit-lastname",class:"block text-sm font-medium text-gray-700"}," Last name ",-1)),r(e("input",{type:"text",id:"edit-institution",required:"","onUpdate:modelValue":t[4]||(t[4]=s=>l.value.last_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.last_name]])]),e("div",null,[t[35]||(t[35]=e("label",{for:"edit-institution",class:"block text-sm font-medium text-gray-700"}," Institution name ",-1)),r(e("input",{type:"text",id:"edit-institution",required:"","onUpdate:modelValue":t[5]||(t[5]=s=>l.value.institution_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.institution_name]])]),e("div",null,[t[37]||(t[37]=e("label",{for:"edit-subcity",class:"block text-sm font-medium text-gray-700"}," Subcity ",-1)),r(e("select",{id:"edit-subcity",required:"","onUpdate:modelValue":t[6]||(t[6]=s=>l.value.subcity_id=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[t[36]||(t[36]=e("option",{disabled:"",value:""}," Select Subcity ",-1)),(n(!0),i(f,null,x(p.subcities,s=>(n(),i("option",{key:s.id,value:s.id},a(s.subcity_name),9,we))),128))],512),[[h,l.value.subcity_id]])]),e("div",null,[t[39]||(t[39]=e("label",{for:"edit-woreda",class:"block text-sm font-medium text-gray-700"}," Woreda ",-1)),r(e("select",{id:"edit-woreda",required:"","onUpdate:modelValue":t[7]||(t[7]=s=>l.value.woreda=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[t[38]||(t[38]=e("option",{disabled:"",value:""},"Select Woreda",-1)),(n(),i(f,null,x(14,s=>e("option",{key:s,value:s},a(s),9,ke)),64))],512),[[h,l.value.woreda]])]),e("div",null,[t[40]||(t[40]=e("label",{for:"edit-special-place",class:"block text-sm font-medium text-gray-700"}," Special Place ",-1)),r(e("input",{type:"text",required:"",id:"edit-special-place","onUpdate:modelValue":t[8]||(t[8]=s=>l.value.special_place=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.special_place]])]),e("div",null,[t[41]||(t[41]=e("label",{for:"edit-phone",class:"block text-sm font-medium text-gray-700"}," Primary Phone ",-1)),r(e("input",{type:"text",required:"",id:"edit-phone","onUpdate:modelValue":t[9]||(t[9]=s=>l.value.primary_phone=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.primary_phone]])]),e("div",null,[t[42]||(t[42]=e("label",{for:"edit-phone",class:"block text-sm font-medium text-gray-700"}," Secondary Phone ",-1)),r(e("input",{type:"text",required:"",id:"edit-phone","onUpdate:modelValue":t[10]||(t[10]=s=>l.value.secondary_phone=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.secondary_phone]])]),e("div",null,[t[43]||(t[43]=e("label",{for:"edit-password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),r(e("input",{type:"password",required:"",id:"edit-password","onUpdate:modelValue":t[11]||(t[11]=s=>l.value.password=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,l.value.password]])])])]),e("div",he,[e("button",{type:"button",onClick:P,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Save Changes "),e("button",{type:"button",onClick:t[12]||(t[12]=s=>y.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):m("",!0),v.value?(n(),i("div",_e,[e("div",Se,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[13]||(t[13]=s=>v.value=!1)}),e("div",Ce,[e("div",Ve,[t[57]||(t[57]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Add Supplier ",-1)),e("div",Ue,[e("div",null,[t[45]||(t[45]=e("label",{for:"add-firstname",class:"block text-sm font-medium text-gray-700"}," First name ",-1)),r(e("input",{type:"text",id:"add-firstname","onUpdate:modelValue":t[14]||(t[14]=s=>o.value.first_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.first_name]])]),e("div",null,[t[46]||(t[46]=e("label",{for:"add-lastname",class:"block text-sm font-medium text-gray-700"}," Last name ",-1)),r(e("input",{type:"text",id:"add-lastname","onUpdate:modelValue":t[15]||(t[15]=s=>o.value.last_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.last_name]])]),e("div",null,[t[47]||(t[47]=e("label",{for:"add-institution",class:"block text-sm font-medium text-gray-700"}," Institution name ",-1)),r(e("input",{type:"text",id:"add-institution","onUpdate:modelValue":t[16]||(t[16]=s=>o.value.institution_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.institution_name]])]),e("div",null,[t[49]||(t[49]=e("label",{for:"add-subcity",class:"block text-sm font-medium text-gray-700"}," Subcity ",-1)),r(e("select",{id:"add-subcity","onUpdate:modelValue":t[17]||(t[17]=s=>o.value.subcity_id=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[t[48]||(t[48]=e("option",{disabled:"",value:""}," Select Subcity ",-1)),(n(!0),i(f,null,x(p.subcities,s=>(n(),i("option",{key:s.id,value:s.id},a(s.subcity_name),9,je))),128))],512),[[h,o.value.subcity_id]])]),e("div",null,[t[51]||(t[51]=e("label",{for:"add-woreda",class:"block text-sm font-medium text-gray-700"}," Woreda ",-1)),r(e("select",{id:"add-woreda","onUpdate:modelValue":t[18]||(t[18]=s=>o.value.woreda=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[t[50]||(t[50]=e("option",{disabled:"",value:""},"Select Woreda",-1)),(n(),i(f,null,x(14,s=>e("option",{key:s,value:s},a(s),9,$e)),64))],512),[[h,o.value.woreda]])]),e("div",null,[t[52]||(t[52]=e("label",{for:"add-special-place",class:"block text-sm font-medium text-gray-700"}," Special Place ",-1)),r(e("input",{type:"text",id:"add-special-place","onUpdate:modelValue":t[19]||(t[19]=s=>o.value.special_place=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.special_place]])]),e("div",null,[t[53]||(t[53]=e("label",{for:"add-phone",class:"block text-sm font-medium text-gray-700"}," Primary Phone ",-1)),r(e("input",{type:"text",id:"add-phone","onUpdate:modelValue":t[20]||(t[20]=s=>o.value.primary_phone=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.primary_phone]])]),e("div",null,[t[54]||(t[54]=e("label",{for:"add-phone",class:"block text-sm font-medium text-gray-700"}," Secondary Phone ",-1)),r(e("input",{type:"text",id:"add-phone","onUpdate:modelValue":t[21]||(t[21]=s=>o.value.secondary_phone=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.secondary_phone]])]),e("div",null,[t[55]||(t[55]=e("label",{for:"add-password",class:"block text-sm font-medium text-gray-700"}," Password ",-1)),r(e("input",{type:"password",id:"add-password","onUpdate:modelValue":t[22]||(t[22]=s=>o.value.password=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.password]])]),e("div",null,[t[56]||(t[56]=e("label",{for:"add-license_number",class:"block text-sm font-medium text-gray-700"}," License ",-1)),r(e("input",{type:"text",id:"add-license_number","onUpdate:modelValue":t[23]||(t[23]=s=>o.value.license_number=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[d,o.value.license_number]])])])]),e("div",Le,[e("button",{type:"button",onClick:T,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Add Supplier "),e("button",{type:"button",onClick:t[24]||(t[24]=s=>v.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):m("",!0),g.value?(n(),i("div",Pe,[e("div",Me,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[25]||(t[25]=s=>g.value=!1)}),e("div",qe,[t[58]||(t[58]=e("div",{class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Remove Supplier "),e("p",{class:"mt-2 text-sm text-gray-500"}," Are you sure you want to remove this supplier? This action cannot be undone. ")],-1)),e("div",Te,[e("button",{type:"button",onClick:q,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Remove "),e("button",{type:"button",onClick:t[26]||(t[26]=s=>g.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):m("",!0)],64)}}});export{Be as default};
