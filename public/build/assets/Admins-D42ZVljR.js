import{r as d,w as S,W as y,a as V,c as i,o as a,b as E,d as e,e as p,f as F,g as r,v as m,F as h,h as M,i as P,j as N,t as u,n as j,k as O,l as W}from"./app-CdEDdTrc.js";import{l as G}from"./lodash-BwZ5YlyZ.js";import I from"./MainLayout-lNw3lfTH.js";const Q={class:"flex-1"},Z={class:"mx-auto w-full max-w-6xl px-4 py-6"},q={class:"mb-6 flex items-center justify-between"},J={class:"flex items-center justify-between gap-x-2"},K={class:"mb-6"},X={class:"mt-6 overflow-hidden rounded-xl border bg-white shadow-sm"},Y={class:"overflow-x-auto"},ee={class:"min-w-full divide-y divide-gray-200"},te={class:"divide-y divide-gray-200"},se={class:"whitespace-nowrap px-6 py-4"},oe={class:"flex items-center"},le={class:"h-10 w-10 flex-shrink-0"},ne={class:"flex h-10 w-10 items-center justify-center rounded-full bg-gray-200 font-semibold text-gray-500"},ae={class:"ml-4"},ie={class:"text-sm font-medium text-gray-900"},re={class:"text-sm text-gray-500"},de={class:"whitespace-nowrap px-6 py-4"},me={class:"text-sm text-gray-900"},ue={class:"whitespace-nowrap px-6 py-4"},ce={class:"text-sm text-gray-900"},fe={class:"whitespace-nowrap px-6 py-4"},pe={class:"whitespace-nowrap px-6 py-4 text-end"},xe={key:0,class:"flex justify-end gap-2"},be=["onClick"],ge=["onClick"],ve={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},ye=["innerHTML"],we=["innerHTML"],he={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ke={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},_e={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ce={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Ae={class:"sm:flex sm:items-start"},je={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},Se={class:"mt-4 space-y-4"},Ve={class:"flex items-center"},Me={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ne={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},$e={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Le={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Ue={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Be={class:"sm:flex sm:items-start"},Te={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},He={class:"mt-4 space-y-4"},ze={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Re={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},De={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Ee={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Fe={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Pe={class:"sm:flex sm:items-start"},Oe={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},We={class:"mt-4"},Ge={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ie={key:3,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},Qe={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Ze={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},qe={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ye=Object.assign({layout:I},{__name:"Admins",props:{admins:Array,filters:Object},setup(f){const k=f,_=d(k.admins.data);S(()=>k.admins,l=>{_.value=l.data});const C=d(k.filters.search),$=G.debounce(l=>{y.get("/admin/admins",{search:l},{preserveState:!0,replace:!0})},300);S(C,l=>{$(l)});const x=d(!1),b=d(!1),g=d(!1),A=d(null),o=d({id:null,first_name:"",last_name:"",phone:"",active:!0,addedDate:""}),n=d({first_name:"",last_name:"",phone:"",password:""});function L(l){o.value={id:l.id,first_name:l.first_name,last_name:l.last_name,phone:l.phone,role:l.role,active:l.status==="Active",password:"",created_at:l.created_at},x.value=!0}function U(){const l=_.value.findIndex(t=>t.id===o.value.id);console.log(o.value.phone),l!==-1&&y.put(`/admin/admins/${o.value.id}`,{first_name:o.value.first_name,last_name:o.value.last_name,phone_number:o.value.phone,password:o.value.password,status:o.value.active}),x.value=!1}function B(l){A.value=l,g.value=!0}function T(){y.delete(`/admin/admins/${A.value}`,{preserveState:!0,replace:!0}),g.value=!1,A.value=null}function H(){y.post("/admin/admins",{first_name:n.value.first_name,last_name:n.value.last_name,phone_number:n.value.phone_number,password:n.value.password}),n.value={first_name:"",last_name:"",phone_number:"",password:""},b.value=!1}const v=d(!1),w=d("");function z(){y.put("/admin/superadmin-secret",{secret:w.value}),w.value="",v.value=!1}return(l,t)=>{const R=V("Head"),D=V("Link");return a(),i(h,null,[E(R,{title:"Admins"}),e("main",Q,[e("div",Z,[e("div",q,[t[22]||(t[22]=e("h2",{class:"text-xl font-bold text-gray-800"},"Current Admins",-1)),e("div",J,[e("button",{onClick:t[0]||(t[0]=s=>v.value=!0),class:"inline-flex items-center gap-x-2 rounded-lg border border-transparent bg-blue-600 px-3 py-2 text-sm font-semibold text-white hover:bg-blue-700"}," Change superadmin secret "),e("button",{onClick:t[1]||(t[1]=s=>b.value=!0),class:"inline-flex items-center gap-x-2 rounded-lg border border-transparent bg-blue-600 px-3 py-2 text-sm font-semibold text-white hover:bg-blue-700"},t[21]||(t[21]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5v14"})],-1),F(" Add Admin ")]))])]),e("div",K,[r(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=s=>C.value=s),class:"block w-full rounded-lg border-gray-200 px-4 py-3 text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Search admins"},null,512),[[m,C.value]])]),e("div",X,[e("div",Y,[e("table",ee,[t[25]||(t[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Full name "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Phone number "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Role "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Actions ")])],-1)),e("tbody",te,[(a(!0),i(h,null,M(_.value,s=>(a(),i("tr",{key:s.id,class:"hover:bg-gray-100"},[e("td",se,[e("div",oe,[e("div",le,[e("div",ne,u(s.first_name.charAt(0))+u(s.last_name.charAt(0)),1)]),e("div",ae,[e("div",ie,u(s.first_name)+" "+u(s.last_name),1),e("div",re," Added on "+u(new Date(s.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})),1)])])]),e("td",de,[e("div",me," +251"+u(s.phone),1)]),e("td",ue,[e("div",ce,u(s.role),1)]),e("td",fe,[e("span",{class:j(["inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",s.status==="Active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},u(s.status),3)]),e("td",pe,[s.role!=="Super Admin"?(a(),i("div",xe,[e("button",{onClick:c=>L(s),class:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-2 text-sm font-medium text-gray-500 hover:bg-gray-100",title:"Edit Admin"},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})],-1)]),8,be),e("button",{onClick:c=>B(s.id),class:"inline-flex items-center rounded-lg border border-gray-200 bg-white p-2 text-sm font-medium text-red-500 hover:bg-red-50",title:"Remove Admin"},t[24]||(t[24]=[N('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg>',1)]),8,ge)])):p("",!0)])]))),128))])])])]),e("nav",ve,[f.admins.links&&f.admins.links.length?(a(!0),i(h,{key:0},M(f.admins.links,(s,c)=>(a(),i(h,{key:c},[s.url?(a(),O(D,{key:0,href:s.url,class:j([c===0?"rounded-l-md":"",c===f.admins.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",s.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:W(()=>[e("span",{innerHTML:s.label},null,8,ye)]),_:2},1032,["href","class"])):(a(),i("span",{key:1,innerHTML:s.label,class:j([c===0?"rounded-l-md":"",c===f.admins.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,we))],64))),128)):p("",!0)])])]),x.value?(a(),i("div",he,[e("div",ke,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[3]||(t[3]=s=>x.value=!1)}),e("div",_e,[e("div",Ce,[e("div",Ae,[e("div",je,[t[31]||(t[31]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Edit Admin ",-1)),e("div",Se,[e("div",null,[t[26]||(t[26]=e("label",{for:"edit-name",class:"block text-sm font-medium text-gray-700"}," First Name ",-1)),r(e("input",{type:"text",id:"edit-name","onUpdate:modelValue":t[4]||(t[4]=s=>o.value.first_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.value.first_name]])]),e("div",null,[t[27]||(t[27]=e("label",{for:"edit-lastName",class:"block text-sm font-medium text-gray-700"}," Last Name ",-1)),r(e("input",{type:"text",id:"edit-lastName","onUpdate:modelValue":t[5]||(t[5]=s=>o.value.last_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.value.last_name]])]),e("div",null,[t[28]||(t[28]=e("label",{for:"edit-phone",class:"block text-sm font-medium text-gray-700"}," Phone number ",-1)),r(e("input",{type:"text",id:"edit-phone","onUpdate:modelValue":t[6]||(t[6]=s=>o.value.phone=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.value.phone]])]),e("div",null,[t[29]||(t[29]=e("label",{for:"edit-password",class:"block text-sm font-medium text-gray-700"}," New password ",-1)),r(e("input",{type:"password",id:"edit-password","onUpdate:modelValue":t[7]||(t[7]=s=>o.value.password=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,o.value.password]])]),e("div",Ve,[r(e("input",{type:"checkbox",id:"edit-active","onUpdate:modelValue":t[8]||(t[8]=s=>o.value.active=s),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"},null,512),[[P,o.value.active]]),t[30]||(t[30]=e("label",{for:"edit-active",class:"ml-2 block text-sm text-gray-900"}," Active ",-1))])])])])]),e("div",Me,[e("button",{type:"button",onClick:U,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Save Changes "),e("button",{type:"button",onClick:t[9]||(t[9]=s=>x.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),b.value?(a(),i("div",Ne,[e("div",$e,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[10]||(t[10]=s=>b.value=!1)}),e("div",Le,[e("div",Ue,[e("div",Be,[e("div",Te,[t[36]||(t[36]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Add New Admin ",-1)),e("div",He,[e("div",null,[t[32]||(t[32]=e("label",{for:"add-name",class:"block text-sm font-medium text-gray-700"},"First Name",-1)),r(e("input",{type:"text",id:"add-name","onUpdate:modelValue":t[11]||(t[11]=s=>n.value.first_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,n.value.first_name]])]),e("div",null,[t[33]||(t[33]=e("label",{for:"add-lastName",class:"block text-sm font-medium text-gray-700"},"Last Name",-1)),r(e("input",{type:"text",id:"add-lastName","onUpdate:modelValue":t[12]||(t[12]=s=>n.value.last_name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,n.value.last_name]])]),e("div",null,[t[34]||(t[34]=e("label",{for:"add-phone",class:"block text-sm font-medium text-gray-700"},"Phone number",-1)),r(e("input",{type:"text",id:"add-phone","onUpdate:modelValue":t[13]||(t[13]=s=>n.value.phone_number=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,n.value.phone_number]])]),e("div",null,[t[35]||(t[35]=e("label",{for:"add-password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),r(e("input",{type:"password",id:"add-password","onUpdate:modelValue":t[14]||(t[14]=s=>n.value.password=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,n.value.password]])])])])])]),e("div",ze,[e("button",{type:"button",onClick:H,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Add Admin "),e("button",{type:"button",onClick:t[15]||(t[15]=s=>b.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),v.value?(a(),i("div",Re,[e("div",De,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[16]||(t[16]=s=>v.value=!1)}),e("div",Ee,[e("div",Fe,[e("div",Pe,[e("div",Oe,[t[38]||(t[38]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Change Superadmin Secret ",-1)),e("div",We,[t[37]||(t[37]=e("label",{for:"superadmin-secret",class:"block text-sm font-medium text-gray-700"}," New Secret ",-1)),r(e("input",{type:"password",id:"superadmin-secret","onUpdate:modelValue":t[17]||(t[17]=s=>w.value=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[m,w.value]])])])])]),e("div",Ge,[e("button",{type:"button",onClick:z,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Save Secret "),e("button",{type:"button",onClick:t[18]||(t[18]=s=>v.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0),g.value?(a(),i("div",Ie,[e("div",Qe,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[19]||(t[19]=s=>g.value=!1)}),e("div",Ze,[t[39]||(t[39]=N('<div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"><div class="sm:flex sm:items-start"><div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"><h3 class="text-lg font-medium leading-6 text-gray-900" id="modal-title"> Remove Admin </h3><div class="mt-2"><p class="text-sm text-gray-500"> Are you sure you want to remove this admin? This action cannot be undone. </p></div></div></div></div>',1)),e("div",qe,[e("button",{type:"button",onClick:T,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Remove "),e("button",{type:"button",onClick:t[20]||(t[20]=s=>g.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):p("",!0)],64)}}});export{Ye as default};
