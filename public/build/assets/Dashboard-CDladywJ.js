import{r as h,q as N,a as f,c as n,o,b as P,d as t,F as c,h as g,e as x,t as l,n as p,f as $,g as j,s as A,k as B,l as H,W as T}from"./app-DIfuQedr.js";import D from"./MainLayout-uTi1jB3B.js";const M={class:"flex min-h-screen flex-col"},V={class:"bg-white-50 flex-1"},q={class:"mx-auto w-full px-2 py-6 sm:px-4"},W={class:"flex flex-col items-center justify-center gap-6 2xl:flex-row"},E={class:"w-full max-w-7xl px-4 py-6"},F={class:"mb-4 border-b border-gray-200"},z={class:"flex space-x-2","aria-label":"Tabs"},Q=["onClick"],U={class:"rounded-xl border bg-white shadow-sm"},G={class:"overflow-x-auto"},I={class:"min-w-full divide-y divide-gray-200"},J={class:"divide-y divide-gray-200"},K={key:0},R={colspan:"5",class:"px-6 py-8 text-center text-gray-500"},X={class:"hover:bg-gray-100"},Y={class:"whitespace-nowrap px-6 py-4"},Z={class:"text-sm font-medium text-gray-900"},tt={class:"text-sm text-gray-500"},et={class:"whitespace-normal break-words px-6 py-4"},st={class:"text-sm text-gray-900"},at={class:"text-sm text-gray-500"},ot={class:"whitespace-nowrap px-6 py-4"},nt={class:"text-sm text-gray-900"},lt={class:"whitespace-nowrap px-6 py-4"},rt={class:"text-sm text-gray-900"},it={class:"text-sm text-gray-500"},ct={class:"whitespace-nowrap px-6 py-4"},dt={class:"flex flex-col gap-2"},ut={class:"mt-1 flex flex-col gap-1"},xt=["onClick"],pt=["onClick"],yt=["onClick"],mt=["onClick"],gt={class:"whitespace-nowrap px-6 py-4 text-end"},ht=["onClick"],_t={key:0,class:"bg-gray-50"},vt={colspan:"6",class:"px-6 py-4"},bt={class:"overflow-x-auto"},ft={class:"min-w-full divide-y divide-gray-200"},wt={class:"divide-y divide-gray-200"},kt={key:0},Ct={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},St={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Lt={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Ot={class:"divide-y divide-gray-200"},Nt={key:0},Pt={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},$t={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},jt={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},At={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},Bt=["innerHTML"],Ht=["innerHTML"],Vt=Object.assign({layout:D},{__name:"Dashboard",props:{orders:Object},setup(u){const d=h(u.orders.data),y=h(null),m=h("All"),w=h([{label:"All Orders",value:"All"},{label:"Completed",value:"Completed"},{label:"Pending",value:"Pending"},{label:"Cancelled",value:"Cancelled"}]),k=N(()=>m.value==="All"?d.value:d.value.filter(r=>r.status===m.value)),C=r=>{const s=d.value.find(i=>i.id===r);s&&(s.expanded=!s.expanded)},S=r=>{y.value=y.value===r?null:r},_=(r,s)=>{const i=d.value.find(v=>v.id===r);i&&T.put(`/admin/orders/${i.id}`,{status:s},{preserveScroll:!0,onSuccess:()=>{i.status=s,i.expanded=!1,y.value=null}})},L=r=>r==="All"?d.value.length:d.value.filter(s=>s.status===r).length,O=r=>{switch(r){case"Completed":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(r,s)=>{const i=f("Head"),v=f("Link");return o(),n(c,null,[P(i,{title:"Dashboard"}),t("div",M,[t("main",V,[t("div",q,[t("div",W,[t("div",E,[s[6]||(s[6]=t("h2",{class:"mb-4 text-xl font-bold text-gray-800"}," Orders List ",-1)),t("div",F,[t("nav",z,[(o(!0),n(c,null,g(w.value,e=>(o(),n("button",{key:e.value,onClick:a=>m.value=e.value,class:p(["inline-flex items-center gap-x-2 whitespace-nowrap border-b-2 px-1 py-4 text-sm",m.value===e.value?"border-blue-600 font-semibold text-blue-600":"border-transparent text-gray-500 hover:border-blue-600 hover:text-blue-600"])},[$(l(e.label)+" ",1),t("span",{class:p(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",O(e.value)])},l(L(e.value)),3)],10,Q))),128))])]),t("div",U,[t("div",G,[t("table",I,[s[5]||(s[5]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Consumer "),t("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Location "),t("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Ordered At "),t("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Phone "),t("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Action ")])],-1)),t("tbody",J,[d.value.length===0?(o(),n("tr",K,[t("td",R," No "+l(m.value.toLowerCase())+" orders found ",1)])):x("",!0),(o(!0),n(c,null,g(k.value,e=>(o(),n(c,{key:e.id},[t("tr",X,[t("td",Y,[t("div",Z,l(e.consumer.institution_name),1),t("div",tt,l(e.consumer.first_name)+" "+l(e.consumer.last_name),1)]),t("td",et,[t("div",st,l(e.consumer.subcity.subcity_name),1),t("div",at," Woreda "+l(e.consumer.woreda)+", "+l(e.consumer.special_place),1)]),t("td",ot,[t("div",nt,l(new Date(e.created_at).toLocaleString()),1)]),t("td",lt,[t("div",rt," +251"+l(e.consumer.primary_phone),1),t("div",it," +251"+l(e.consumer.secondary_phone),1)]),t("td",ct,[t("div",dt,[t("button",{class:p(["inline-flex items-center gap-x-2 rounded-lg border border-gray-200 px-3 py-1 text-sm font-medium text-white",{"bg-green-500 hover:bg-green-600":e.status==="Completed","bg-yellow-500 hover:bg-yellow-600":e.status==="Pending","bg-red-500 hover:bg-red-600":e.status==="Cancelled"}])},l(e.status),3),j(t("div",ut,[e.status!=="Completed"?(o(),n("button",{key:0,onClick:a=>_(e.id,"Completed"),class:"rounded bg-green-500 px-2 py-1 text-xs font-medium text-white hover:bg-green-600"}," Set Completed ",8,xt)):x("",!0),e.status!=="Pending"?(o(),n("button",{key:1,onClick:a=>_(e.id,"Pending"),class:"rounded bg-yellow-500 px-2 py-1 text-xs font-medium text-white hover:bg-yellow-600"}," Set Pending ",8,pt)):x("",!0),e.status!=="Cancelled"?(o(),n("button",{key:2,onClick:a=>_(e.id,"Cancelled"),class:"rounded bg-red-500 px-2 py-1 text-xs font-medium text-white hover:bg-red-600"}," Set Cancelled ",8,yt)):x("",!0)],512),[[A,e.id===y.value]]),t("button",{onClick:a=>S(e.id),class:"rounded bg-gray-200 px-2 py-1 text-xs font-medium text-gray-700 hover:bg-gray-300"},l(e.id===y.value?"Hide Options":"Change Status"),9,mt)])]),t("td",gt,[t("button",{onClick:a=>C(e.id),class:"inline-flex items-center justify-center rounded-full border border-gray-200 bg-white p-1 text-gray-500 hover:bg-gray-100"},[(o(),n("svg",{class:p(["h-5 w-5 transition-transform duration-200",{"rotate-180":e.expanded}]),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s[0]||(s[0]=[t("path",{d:"m6 9 6 6 6-6"},null,-1)]),2))],8,ht)])]),e.expanded?(o(),n("tr",_t,[t("td",vt,[t("div",bt,[t("table",ft,[s[3]||(s[3]=t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Product Name "),t("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Unit "),t("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Quantity ")])],-1)),t("tbody",wt,[e.items.length===0?(o(),n("tr",kt,s[1]||(s[1]=[t("td",{colspan:"3",class:"px-6 py-2 text-center text-sm text-gray-500"}," No products found. ",-1)]))):(o(!0),n(c,{key:1},g(e.items,a=>(o(),n("tr",{key:a.product_id,class:"hover:bg-gray-100"},[t("td",Ct,l(a.product.product_name),1),t("td",St,l(a.product.unit?a.product.unit.unit_name:"None"),1),t("td",Lt,l(a.quantity),1)]))),128))]),s[4]||(s[4]=t("tr",null,[t("td",{colspan:"3",class:"bg-gray-200 px-6 py-2 text-sm font-semibold text-gray-700"}," Custom orders ")],-1)),t("tbody",Ot,[e.custom_items.length===0?(o(),n("tr",Nt,s[2]||(s[2]=[t("td",{colspan:"3",class:"px-6 py-2 text-center text-sm text-gray-500"}," No custom orders found. ",-1)]))):(o(!0),n(c,{key:1},g(e.custom_items,a=>{var b;return o(),n("tr",{key:a.id,class:"hover:bg-gray-100"},[t("td",Pt,l(a.product_name),1),t("td",$t,l(((b=a.unit)==null?void 0:b.unit_name)??"None"),1),t("td",jt,l(a.quantity),1)])}),128))])])])])])):x("",!0)],64))),128))])])])]),t("nav",At,[u.orders.links&&u.orders.links.length?(o(!0),n(c,{key:0},g(u.orders.links,(e,a)=>(o(),n(c,{key:a},[e.url?(o(),B(v,{key:0,"prserve-scroll":"",href:e.url,class:p([a===0?"rounded-l-md":"",a===u.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",e.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:H(()=>[t("span",{innerHTML:e.label},null,8,Bt)]),_:2},1032,["href","class"])):(o(),n("span",{key:1,innerHTML:e.label,class:p([a===0?"rounded-l-md":"",a===u.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,Ht))],64))),128)):x("",!0)])])])])])])],64)}}});export{Vt as default};
