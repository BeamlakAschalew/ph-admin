import{r as a,w as V,W as k,a as L,c as n,o as l,b as O,d as e,e as y,f as N,g as h,v as P,F as p,h as _,p as $,j as S,t as C,k as F,l as W,n as U}from"./app-CFMc3HZ8.js";import{l as I}from"./lodash-BCtw65TD.js";import Q from"./MainLayout-ITQIC1Ed.js";const Z={class:"flex-1"},q={class:"mx-auto w-full max-w-4xl px-4 py-6"},G={class:"mb-6"},J={class:"overflow-hidden rounded-xl border bg-white shadow-sm"},K={class:"overflow-x-auto"},R={class:"min-w-full divide-y divide-gray-200"},X={class:"divide-y divide-gray-200"},Y={key:0},ee={class:"whitespace-nowrap px-6 py-4"},te={class:"text-sm font-medium text-gray-900"},se={class:"whitespace-nowrap px-6 py-4"},oe={class:"text-sm text-gray-900"},le={class:"whitespace-nowrap px-6 py-4 text-end"},ne={class:"flex justify-end gap-2"},ie=["onClick"],de=["onClick"],re={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},ae=["innerHTML"],ue=["innerHTML"],me={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ce={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},fe={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},pe={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},xe={class:"sm:flex sm:items-start"},ge={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},be={class:"mt-4 space-y-4"},ve=["value"],ye={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},he={key:1,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},we={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},ke={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},_e={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ce={key:2,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},je={class:"flex min-h-screen items-end justify-center px-4 pb-20 pt-4 text-center sm:block sm:p-0"},Me={class:"inline-block transform overflow-hidden rounded-lg bg-white text-left align-bottom shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:align-middle"},Pe={class:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"},Ve={class:"sm:flex sm:items-start"},Le={class:"mt-3 w-full text-center sm:ml-4 sm:mt-0 sm:text-left"},Ne={class:"mt-4 space-y-4"},$e=["value"],Se={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Be=Object.assign({layout:Q},{__name:"Products",props:{products:Object,filters:Object,units:Array},setup(c){const w=c,i=a([{id:null,unit_name:"None"},...w.units]),f=a(w.products.data);V(()=>w.products,o=>{f.value=o.data});const j=a(w.filters.search),D=I.debounce(o=>{k.get("/admin/products",{search:o},{preserveState:!0,replace:!0,except:["units"]})},300);V(j,o=>{D(o)});const x=a(!1),d=a({id:null,name:"",unit:i.value[0].id}),A=o=>{var t,u;d.value={id:o.id,name:o.product_name,unit:o.unit?(t=i.value.find(v=>v.unit_name===o.unit.unit_name))==null?void 0:t.id:((u=i.value.find(v=>v.id===null))==null?void 0:u.id)||i.value[0].id},x.value=!0},B=()=>{const o=f.value.findIndex(u=>u.id===d.value.id),t=i.value.find(u=>u.id===d.value.unit);o!==-1&&k.put(`/admin/products/${d.value.id}`,{product_name:d.value.name,product_unit_id:t?t.id:""},{preserveState:!0,replace:!0,except:["units"]}),x.value=!1},g=a(!1),M=a(null),T=o=>{M.value=o,g.value=!0},H=()=>{f.value=f.value.filter(o=>o.id!==M.value),k.delete(`/admin/products/${M.value}`,{preserveState:!0,replace:!0,except:["units"]}),g.value=!1},b=a(!1),m=a({name:"",unit:null}),E=()=>{m.value={name:"",unit:null},b.value=!0},z=()=>{const o=i.value.find(t=>t.id===m.value.unit);k.post("/admin/products",{product_name:m.value.name,product_unit_id:o?o.id:""},{preserveState:!0,replace:!0,except:["units"]}),b.value=!1};return(o,t)=>{const u=L("Head"),v=L("Link");return l(),n(p,null,[O(u,{title:"Products"}),e("main",Z,[e("div",q,[e("div",{class:"mb-6 flex items-center justify-between"},[t[12]||(t[12]=e("h1",{class:"text-2xl font-bold text-gray-800"},"Products List",-1)),e("button",{onClick:E,class:"inline-flex items-center gap-x-2 rounded-lg bg-teal-600 px-4 py-2 text-sm font-medium text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2"},t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5v14"})],-1),N(" Add a product ")]))]),e("div",G,[h(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>j.value=s),class:"block w-full rounded-lg border-gray-200 px-4 py-3 text-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Search products..."},null,512),[[P,j.value]])]),e("div",J,[e("div",K,[e("table",R,[t[16]||(t[16]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Product Name "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Unit "),e("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Actions ")])],-1)),e("tbody",X,[f.value.length===0?(l(),n("tr",Y,t[13]||(t[13]=[e("td",{colspan:"3",class:"px-6 py-8 text-center text-gray-500"}," No products found ",-1)]))):y("",!0),(l(!0),n(p,null,_(f.value,s=>(l(),n("tr",{key:s.id,class:"hover:bg-gray-100"},[e("td",ee,[e("div",te,C(s.product_name),1)]),e("td",se,[e("div",oe,C(s.unit?s.unit.unit_name:i.value.find(r=>r.id===null).unit_name),1)]),e("td",le,[e("div",ne,[e("button",{onClick:r=>A(s),class:"inline-flex items-center gap-x-1 rounded-lg border border-transparent bg-blue-500 px-3 py-1 text-sm font-medium text-white hover:bg-blue-600"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})],-1),N(" Edit ")]),8,ie),e("button",{onClick:r=>T(s.id),class:"inline-flex items-center gap-x-1 rounded-lg border border-transparent bg-red-500 px-3 py-1 text-sm font-medium text-white hover:bg-red-600"},t[15]||(t[15]=[S('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-4 w-4"><path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path><line x1="10" x2="10" y1="11" y2="17"></line><line x1="14" x2="14" y1="11" y2="17"></line></svg> Delete ',2)]),8,de)])])]))),128))])])])]),e("nav",re,[c.products.links&&c.products.links.length?(l(!0),n(p,{key:0},_(c.products.links,(s,r)=>(l(),n(p,{key:r},[s.url?(l(),F(v,{key:0,href:s.url,class:U([r===0?"rounded-l-md":"",r===c.products.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",s.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:W(()=>[e("span",{innerHTML:s.label},null,8,ae)]),_:2},1032,["href","class"])):(l(),n("span",{key:1,innerHTML:s.label,class:U([r===0?"rounded-l-md":"",r===c.products.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,ue))],64))),128)):y("",!0)])])]),x.value?(l(),n("div",me,[e("div",ce,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[1]||(t[1]=s=>x.value=!1)}),e("div",fe,[e("div",pe,[e("div",xe,[e("div",ge,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Edit Product ",-1)),e("div",be,[e("div",null,[t[17]||(t[17]=e("label",{for:"edit-name",class:"block text-sm font-medium text-gray-700"},"Product Name",-1)),h(e("input",{type:"text",id:"edit-name","onUpdate:modelValue":t[2]||(t[2]=s=>d.value.name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[P,d.value.name]])]),e("div",null,[t[18]||(t[18]=e("label",{for:"edit-unit",class:"block text-sm font-medium text-gray-700"},"Unit",-1)),h(e("select",{id:"edit-unit","onUpdate:modelValue":t[3]||(t[3]=s=>d.value.unit=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[(l(!0),n(p,null,_(i.value,s=>(l(),n("option",{value:s.id,key:s.id},C(s.unit_name),9,ve))),128))],512),[[$,d.value.unit]])])])])])]),e("div",ye,[e("button",{type:"button",onClick:B,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Save Changes "),e("button",{type:"button",onClick:t[4]||(t[4]=s=>x.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):y("",!0),g.value?(l(),n("div",he,[e("div",we,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[5]||(t[5]=s=>g.value=!1)}),e("div",ke,[t[20]||(t[20]=S('<div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4"><div class="sm:flex sm:items-start"><div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"><h3 class="text-lg font-medium leading-6 text-gray-900" id="modal-title"> Delete Product </h3><div class="mt-2"><p class="text-sm text-gray-500"> Are you sure you want to delete this product? This action cannot be undone. </p></div></div></div></div>',1)),e("div",_e,[e("button",{type:"button",onClick:H,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Delete "),e("button",{type:"button",onClick:t[6]||(t[6]=s=>g.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):y("",!0),b.value?(l(),n("div",Ce,[e("div",je,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[7]||(t[7]=s=>b.value=!1)}),e("div",Me,[e("div",Pe,[e("div",Ve,[e("div",Le,[t[23]||(t[23]=e("h3",{class:"text-lg font-medium leading-6 text-gray-900",id:"modal-title"}," Add New Product ",-1)),e("div",Ne,[e("div",null,[t[21]||(t[21]=e("label",{for:"add-name",class:"block text-sm font-medium text-gray-700"},"Product Name",-1)),h(e("input",{type:"text",id:"add-name","onUpdate:modelValue":t[8]||(t[8]=s=>m.value.name=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},null,512),[[P,m.value.name]])]),e("div",null,[t[22]||(t[22]=e("label",{for:"add-unit",class:"block text-sm font-medium text-gray-700"},"Unit",-1)),h(e("select",{id:"add-unit","onUpdate:modelValue":t[9]||(t[9]=s=>m.value.unit=s),class:"mt-1 block w-full rounded-md border-gray-300 px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm"},[(l(!0),n(p,null,_(i.value,s=>(l(),n("option",{value:s.id,key:s.id},C(s.unit_name),9,$e))),128))],512),[[$,m.value.unit]])])])])])]),e("div",Se,[e("button",{type:"button",onClick:z,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:w-auto sm:text-sm"}," Add Product "),e("button",{type:"button",onClick:t[10]||(t[10]=s=>b.value=!1),class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:ml-3 sm:mt-0 sm:w-auto sm:text-sm"}," Cancel ")])])])])):y("",!0)],64)}}});export{Be as default};
