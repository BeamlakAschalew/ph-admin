import{r as y,q as O,a as b,c as l,o as n,b as P,d as e,F as d,h,e as x,t as o,n as p,f as $,g as j,s as A,k as B,l as H,W as N}from"./app-DsohFR8_.js";import T from"./MainLayout-4DJ5qrhP.js";const D={class:"flex min-h-screen flex-col"},M={class:"bg-white-50 flex-1"},V={class:"mx-auto w-full px-2 py-6 sm:px-4"},W={class:"flex flex-col items-center justify-center gap-6 2xl:flex-row"},q={class:"w-full max-w-7xl px-4 py-6"},E={class:"mb-4 border-b border-gray-200"},F={class:"flex space-x-2","aria-label":"Tabs"},z=["onClick"],Q={class:"rounded-xl border bg-white shadow-sm"},U={class:"overflow-x-auto"},G={class:"min-w-full divide-y divide-gray-200"},I={class:"divide-y divide-gray-200"},J={key:0},K={colspan:"5",class:"px-6 py-8 text-center text-gray-500"},R={class:"hover:bg-gray-100"},X={class:"whitespace-nowrap px-6 py-4"},Y={class:"text-sm font-medium text-gray-900"},Z={class:"text-sm text-gray-500"},ee={class:"whitespace-normal break-words px-6 py-4"},te={class:"text-sm text-gray-900"},se={class:"text-sm text-gray-500"},ae={class:"whitespace-nowrap px-6 py-4"},ne={class:"text-sm text-gray-900"},oe={class:"whitespace-nowrap px-6 py-4"},le={class:"text-sm text-gray-900"},re={class:"text-sm text-gray-500"},ce={class:"whitespace-nowrap px-6 py-4"},ie={class:"flex flex-col gap-2"},de={class:"mt-1 flex flex-col gap-1"},ue=["onClick"],xe=["onClick"],pe=["onClick"],me=["onClick"],ge={class:"whitespace-nowrap px-6 py-4 text-end"},ye=["onClick"],he={key:0,class:"bg-gray-50"},_e={colspan:"5",class:"px-6 py-4"},ve={class:"overflow-x-auto"},be={class:"min-w-full divide-y divide-gray-200"},fe={class:"divide-y divide-gray-200"},we={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},ke={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Ce={class:"whitespace-nowrap px-6 py-2 text-sm text-gray-900"},Se={class:"mt-5 flex items-center -space-x-px","aria-label":"Pagination"},Le=["innerHTML"],Oe=["innerHTML"],Ae=Object.assign({layout:T},{__name:"Dashboard",props:{orders:Object},setup(u){const i=y(u.orders.data),m=y(null),g=y("All"),f=y([{label:"All Orders",value:"All"},{label:"Completed",value:"Completed"},{label:"Pending",value:"Pending"},{label:"Cancelled",value:"Cancelled"}]),w=O(()=>g.value==="All"?i.value:i.value.filter(r=>r.status===g.value)),k=r=>{const s=i.value.find(c=>c.id===r);s&&(s.expanded=!s.expanded)},C=r=>{m.value=m.value===r?null:r},_=(r,s)=>{const c=i.value.find(v=>v.id===r);c&&N.put(`/admin/orders/${c.id}`,{status:s},{preserveScroll:!0,onSuccess:()=>{c.status=s,c.expanded=!1,m.value=null}})},S=r=>r==="All"?i.value.length:i.value.filter(s=>s.status===r).length,L=r=>{switch(r){case"Completed":return"bg-green-100 text-green-800";case"Pending":return"bg-yellow-100 text-yellow-800";case"Cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(r,s)=>{const c=b("Head"),v=b("Link");return n(),l(d,null,[P(c,{title:"Dashboard"}),e("div",D,[e("main",M,[e("div",V,[e("div",W,[e("div",q,[s[3]||(s[3]=e("h2",{class:"mb-4 text-xl font-bold text-gray-800"}," Orders List ",-1)),e("div",E,[e("nav",F,[(n(!0),l(d,null,h(f.value,t=>(n(),l("button",{key:t.value,onClick:a=>g.value=t.value,class:p(["inline-flex items-center gap-x-2 whitespace-nowrap border-b-2 px-1 py-4 text-sm",g.value===t.value?"border-blue-600 font-semibold text-blue-600":"border-transparent text-gray-500 hover:border-blue-600 hover:text-blue-600"])},[$(o(t.label)+" ",1),e("span",{class:p(["inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium",L(t.value)])},o(S(t.value)),3)],10,z))),128))])]),e("div",Q,[e("div",U,[e("table",G,[s[2]||(s[2]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Consumer "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Location "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Ordered At "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Phone "),e("th",{scope:"col",class:"px-6 py-3 text-start text-xs font-medium uppercase text-gray-500"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-end text-xs font-medium uppercase text-gray-500"}," Action ")])],-1)),e("tbody",I,[i.value.length===0?(n(),l("tr",J,[e("td",K," No "+o(g.value.toLowerCase())+" orders found ",1)])):x("",!0),(n(!0),l(d,null,h(w.value,t=>(n(),l(d,{key:t.id},[e("tr",R,[e("td",X,[e("div",Y,o(t.consumer.institution_name),1),e("div",Z,o(t.consumer.first_name)+" "+o(t.consumer.last_name),1)]),e("td",ee,[e("div",te,o(t.consumer.subcity.subcity_name),1),e("div",se," Woreda "+o(t.consumer.woreda)+", "+o(t.consumer.special_place),1)]),e("td",ae,[e("div",ne,o(new Date(t.created_at).toLocaleString()),1)]),e("td",oe,[e("div",le," +251"+o(t.consumer.primary_phone),1),e("div",re," +251"+o(t.consumer.secondary_phone),1)]),e("td",ce,[e("div",ie,[e("button",{class:p(["inline-flex items-center gap-x-2 rounded-lg border border-gray-200 px-3 py-1 text-sm font-medium text-white",{"bg-green-500 hover:bg-green-600":t.status==="Completed","bg-yellow-500 hover:bg-yellow-600":t.status==="Pending","bg-red-500 hover:bg-red-600":t.status==="Cancelled"}])},o(t.status),3),j(e("div",de,[t.status!=="Completed"?(n(),l("button",{key:0,onClick:a=>_(t.id,"Completed"),class:"rounded bg-green-500 px-2 py-1 text-xs font-medium text-white hover:bg-green-600"}," Set Completed ",8,ue)):x("",!0),t.status!=="Pending"?(n(),l("button",{key:1,onClick:a=>_(t.id,"Pending"),class:"rounded bg-yellow-500 px-2 py-1 text-xs font-medium text-white hover:bg-yellow-600"}," Set Pending ",8,xe)):x("",!0),t.status!=="Cancelled"?(n(),l("button",{key:2,onClick:a=>_(t.id,"Cancelled"),class:"rounded bg-red-500 px-2 py-1 text-xs font-medium text-white hover:bg-red-600"}," Set Cancelled ",8,pe)):x("",!0)],512),[[A,t.id===m.value]]),e("button",{onClick:a=>C(t.id),class:"rounded bg-gray-200 px-2 py-1 text-xs font-medium text-gray-700 hover:bg-gray-300"},o(t.id===m.value?"Hide Options":"Change Status"),9,me)])]),e("td",ge,[e("button",{onClick:a=>k(t.id),class:"inline-flex items-center justify-center rounded-full border border-gray-200 bg-white p-1 text-gray-500 hover:bg-gray-100"},[(n(),l("svg",{class:p(["h-5 w-5 transition-transform duration-200",{"rotate-180":t.expanded}]),xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},s[0]||(s[0]=[e("path",{d:"m6 9 6 6 6-6"},null,-1)]),2))],8,ye)])]),t.expanded?(n(),l("tr",he,[e("td",_e,[e("div",ve,[e("table",be,[s[1]||(s[1]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Product Name "),e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Unit "),e("th",{scope:"col",class:"px-6 py-2 text-start text-xs font-medium uppercase text-gray-500"}," Quantity ")])],-1)),e("tbody",fe,[(n(!0),l(d,null,h(t.items,a=>(n(),l("tr",{key:a.product_id,class:"hover:bg-gray-100"},[e("td",we,o(a.product.product_name),1),e("td",ke,o(a.product.unit?a.product.unit.unit_name:"None"),1),e("td",Ce,o(a.quantity),1)]))),128))])])])])])):x("",!0)],64))),128))])])])]),e("nav",Se,[u.orders.links&&u.orders.links.length?(n(!0),l(d,{key:0},h(u.orders.links,(t,a)=>(n(),l(d,{key:a},[t.url?(n(),B(v,{key:0,"prserve-scroll":"",href:t.url,class:p([a===0?"rounded-l-md":"",a===u.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center px-3 py-2 text-sm",t.active?"bg-gray-600 text-white":"border border-gray-200 text-gray-800 hover:bg-gray-100"])},{default:H(()=>[e("span",{innerHTML:t.label},null,8,Le)]),_:2},1032,["href","class"])):(n(),l("span",{key:1,innerHTML:t.label,class:p([a===0?"rounded-l-md":"",a===u.orders.links.length-1?"rounded-r-md":"","min-h-9.5 min-w-9.5 flex items-center justify-center border border-gray-200 px-3 py-2 text-gray-800"])},null,10,Oe))],64))),128)):x("",!0)])])])])])])],64)}}});export{Ae as default};
